{
  "$schema": "../node_modules/nx/schemas/project-schema.json",
  "name": "site",
  "root": "quartz",
  "sourceRoot": "quartz",
  "projectType": "application",
  "targets": {
    "clean": {
      "//": "Cleans quartz cache files",
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "rm -rf public",
          "rm -rf quartz/.quartz-cache"
        ],
        "cwd": "{workspaceRoot}",
        "parallel": true
      }
    },
    "_prebuild": {
      "//": "Internal target to run pre-build steps",
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "echo 'Pre-build steps complete!'"
        ],
        "cwd": "{workspaceRoot}",
        "parallel": false
      },
      "dependsOn": [
        "vault:download-annotation-pdfs",
        "vault:index-tags"
      ]
    },
    "serve": {
      "//": "Dev server with hot reload. Use serve:docs or serve:site for presets.",
      "executor": "nx:run-commands",
      "options": {
        "commands": [ "./quartz/bootstrap-cli.mjs build --serve -d {args.dir}" ],
        "parallel": false,
        "cwd": "{workspaceRoot}"
      },
      "configurations": {
        "docs": {
          "commands": [ "./quartz/bootstrap-cli.mjs build --serve -d docs/reference/external/quartz/repo/docs" ]
        },
        "site": {
          "commands": [ "./quartz/bootstrap-cli.mjs build --serve -d content/public" ]
        }
      },
      "defaultConfiguration": "site",
      "continuous": true,
      "dependsOn": [ "vault:sync", "site:_prebuild" ]
    },
    "build": {
      "//": "Production build to public/. Use build:docs or build:site for presets.",
      "executor": "nx:run-commands",
      "options": {
        "commands": [ "./quartz/bootstrap-cli.mjs build -d {args.dir}" ],
        "parallel": false,
        "cwd": "{workspaceRoot}"
      },
      "configurations": {
        "docs": {
          "commands": [ "./quartz/bootstrap-cli.mjs build -d docs/reference/external/quartz/repo/docs" ]
        },
        "site": {
          "commands": [ "./quartz/bootstrap-cli.mjs build -d content/public" ]
        }
      },
      "defaultConfiguration": "site",
      "outputs": [ "{workspaceRoot}/public" ],
      "dependsOn": [ "site:clean", "site:_prebuild" ]
    },
    "check": {
      "//": "Type checking and formatting validation",
      "executor": "nx:run-commands",
      "options": {
        "commands": [ "tsc --noEmit", "npx prettier . --check" ],
        "parallel": false,
        "cwd": "{workspaceRoot}"
      }
    },
    "format": {
      "//": "Auto-format codebase with Prettier",
      "executor": "nx:run-commands",
      "options": {
        "commands": [ "npx prettier . --write" ],
        "parallel": false,
        "cwd": "{workspaceRoot}"
      }
    },
    "test": {
      "//": "Run tests via tsx",
      "executor": "nx:run-commands",
      "options": {
        "commands": [ "tsx --test" ],
        "parallel": false,
        "cwd": "{workspaceRoot}"
      }
    }
  }
}
