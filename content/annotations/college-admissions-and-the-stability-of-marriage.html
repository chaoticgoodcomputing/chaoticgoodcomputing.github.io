<!DOCTYPE html>
<html lang="en" dir="ltr"><head><title>College Admissions and the Stability of Marriage | CGC</title><meta charset="utf-8"/><link rel="stylesheet" href="/static/fonts/fonts.css"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="Chaotic Good Computing"/><meta property="og:title" content="College Admissions and the Stability of Marriage | CGC"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="College Admissions and the Stability of Marriage | CGC"/><meta name="twitter:description" content="A dive into the hottest algorithm of the 1960s: Gale-Shapley matchmaking. Who knew that the mysteries of the heart could be solved with a matrix?
"/><meta property="og:description" content="A dive into the hottest algorithm of the 1960s: Gale-Shapley matchmaking. Who knew that the mysteries of the heart could be solved with a matrix?
"/><meta property="og:image:alt" content="A dive into the hottest algorithm of the 1960s: Gale-Shapley matchmaking. Who knew that the mysteries of the heart could be solved with a matrix?
"/><meta property="twitter:domain" content="blog.chaoticgood.computer"/><meta property="og:url" content="https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage"/><meta property="twitter:url" content="https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage"/><link rel="canonical" href="https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="A dive into the hottest algorithm of the 1960s: Gale-Shapley matchmaking. Who knew that the mysteries of the heart could be solved with a matrix?
"/><meta name="generator" content="Quartz"/><script type="application/ld+json">{&quot;@context&quot;:&quot;https://schema.org&quot;,&quot;@type&quot;:&quot;ScholarlyArticle&quot;,&quot;headline&quot;:&quot;College Admissions and the Stability of Marriage&quot;,&quot;url&quot;:&quot;https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage&quot;,&quot;image&quot;:&quot;https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage-og-image.webp&quot;,&quot;inLanguage&quot;:&quot;en-US&quot;,&quot;mainEntityOfPage&quot;:{&quot;@type&quot;:&quot;WebPage&quot;,&quot;@id&quot;:&quot;https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage&quot;},&quot;author&quot;:{&quot;@type&quot;:&quot;Person&quot;,&quot;name&quot;:&quot;Spencer Elkington&quot;,&quot;url&quot;:&quot;https://blog.chaoticgood.computer/about&quot;},&quot;publisher&quot;:{&quot;@type&quot;:&quot;Organization&quot;,&quot;name&quot;:&quot;Chaotic Good Computing&quot;,&quot;url&quot;:&quot;https://blog.chaoticgood.computer/about&quot;,&quot;logo&quot;:{&quot;@type&quot;:&quot;ImageObject&quot;,&quot;url&quot;:&quot;https://blog.chaoticgood.computer/static/icon.png&quot;,&quot;width&quot;:184,&quot;height&quot;:184}},&quot;description&quot;:&quot;A dive into the hottest algorithm of the 1960s: Gale-Shapley matchmaking. Who knew that the mysteries of the heart could be solved with a matrix?\n&quot;,&quot;datePublished&quot;:&quot;2024-03-14T00:00:00.000Z&quot;,&quot;dateModified&quot;:&quot;2024-03-14T00:00:00.000Z&quot;,&quot;articleSection&quot;:&quot;Annotations&quot;,&quot;keywords&quot;:&quot;economics/markets, writing/annotations&quot;}</script><link href="/index.css" rel="stylesheet" type="text/css" data-persist="true"/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvcnVubmVyL3dvcmsvY2hhb3RpY2dvb2Rjb21wdXRpbmcuZ2l0aHViLmlvL2NoYW90aWNnb29kY29tcHV0aW5nLmdpdGh1Yi5pby9xdWFydHovY29tcG9uZW50cy9zdHlsZXMiLCJzb3VyY2VzIjpbIm1lcm1haWQuaW5saW5lLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7OztBQUtGO0VBQ0U7RUFDQTs7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUlGO0VBQ0U7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4cGFuZC1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsb2F0OiByaWdodDtcbiAgcGFkZGluZzogMC40cmVtO1xuICBtYXJnaW46IDAuM3JlbTtcbiAgcmlnaHQ6IDA7IC8vIE5PVEU6IHJpZ2h0IHdpbGwgYmUgc2V0IGluIG1lcm1haWQuaW5saW5lLnRzXG4gIGNvbG9yOiB2YXIoLS1ncmF5KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICBib3JkZXI6IDFweCBzb2xpZDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiAwLjJzO1xuXG4gICYgPiBzdmcge1xuICAgIGZpbGw6IHZhcigtLWxpZ2h0KTtcbiAgICBmaWx0ZXI6IGNvbnRyYXN0KDAuMyk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpO1xuICB9XG5cbiAgJjpmb2N1cyB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxufVxuXG5wcmUge1xuICAmOmhvdmVyID4gLmV4cGFuZC1idXR0b24ge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbjogMC4ycztcbiAgfVxufVxuXG4jbWVybWFpZC1jb250YWluZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGNvbnRhaW46IGxheW91dDtcbiAgei1pbmRleDogOTk5O1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZGlzcGxheTogbm9uZTtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDRweCk7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcblxuICAmLmFjdGl2ZSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB9XG5cbiAgJiA+ICNtZXJtYWlkLXNwYWNlIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0KTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICBoZWlnaHQ6IDgwdmg7XG4gICAgd2lkdGg6IDgwdnc7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAgICYgPiAubWVybWFpZC1jb250ZW50IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzIGVhc2U7XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgICAgbWluLXdpZHRoOiAyMDBweDtcblxuICAgICAgcHJlIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIG1heC13aWR0aDogbm9uZTtcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgfVxuICAgIH1cblxuICAgICYgPiAubWVybWFpZC1jb250cm9scyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDIwcHg7XG4gICAgICByaWdodDogMjBweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDhweDtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgei1pbmRleDogMjtcblxuICAgICAgLm1lcm1haWQtY29udHJvbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFyayk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5Rm9udCk7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0eWxlIHRoZSByZXNldCBidXR0b24gZGlmZmVyZW50bHlcbiAgICAgICAgJjpudGgtY2hpbGQoMikge1xuICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" data-persist="true"/><script src="/prescript.js" type="application/javascript"></script><script type="application/javascript" data-persist="true">const fetchData = fetch("/static/contentIndex.json").then(data => data.json())</script><script type="application/javascript" data-persist="true">const fetchTagData = fetch("/static/tagIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://blog.chaoticgood.computer/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage-og-image.webp"/><meta property="og:image:url" content="https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage-og-image.webp"/><meta name="twitter:image" content="https://blog.chaoticgood.computer/content/annotations/college-admissions-and-the-stability-of-marriage-og-image.webp"/><meta property="og:image:type" content="image/webp"/></head><body data-slug="content/annotations/college-admissions-and-the-stability-of-marriage" class="full-width"><div id="quartz-root" class="page"><div id="quartz-body"><div class="center"><div class="page-header"><div class="popover-hint"><h1 class="article-title">College Admissions and the Stability of Marriage</h1><ul class="tags" data-showtags="true" data-showsubtags="false" data-showcount="true" data-currentslug="content/annotations/college-admissions-and-the-stability-of-marriage"><li class="tag-item" data-tag="economics/markets"><a href="#" class="internal tag-link"><span class="tag-icon-badge"></span><span class="tag-name"></span><span class="tag-count"></span></a></li><li class="tag-item" data-tag="writing/annotations"><a href="#" class="internal tag-link"><span class="tag-icon-badge"></span><span class="tag-name"></span><span class="tag-count"></span></a></li></ul></div></div><div class="annotation-viewer" data-pdf-url="/assets/annotated-documents/GaleShapley62.pdf" data-source-url="https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf"><script type="application/json" id="annotations-data">[{"text":"<p>This is a little test of something I'd like to do - keeping annotations of papers I've read on the CGC website, provided that they are open-access (which, unfortunately, is not always the case.)</p>\n<p>This is being done with the <a href=\"https://github.com/elias-sundqvist/obsidian-annotator\">Obsidian Annotator</a> plugin. I have <em>absolutely no idea</em> how quartz is going to handle this, so... we'll see! There's a very real chance that this is going to end up being a substantially heavier lift on the frontend and design side than my feeble backend brain can handle. So, if you're seeing this, feel free to pat me on the back for figuring it out (☞ﾟヮﾟ)☞</p>","target":[{"source":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","selector":[{"type":"TextPositionSelector","start":0,"end":48},{"type":"TextQuoteSelector","exact":"College Admissions and the Stability of Marriage","prefix":"th50%75%100%125%150%200%300%400%","suffix":"Author(s): D. Gale and L. S. Sha"}]}],"created":"2024-03-14T22:23:53.656Z","updated":"2024-03-14T22:23:53.656Z","document":{"title":"College Admissions and the Stability of Marriage","link":[{"href":"urn:x-pdf:dd0c1fc592ad4dea981aaf84679261c3"},{"href":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf"}],"documentFingerprint":"dd0c1fc592ad4dea981aaf84679261c3"},"uri":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","id":"vmh5jlenjap"},{"text":"<p>Without further ado! College Admissions and the Stability of Marriage was the second paper(ish) that I read related to market design and non-market environments that got me interested in the subject. The first, Dr. Kenneth Arrow's <a href=\"https://cowles.yale.edu/sites/default/files/2022-09/m12-2-all.pdf\">Social Choice and Individual Values</a>, was related more to voting systems - something that comes up every four years in America and then somewhat drifts into a hibernation until the next worthy national debate over the merits of first-past-the-post.</p>\n<p>This one caught my attention, though, as it was the first technical analysis I'd seen of a topic that had some <em>weight</em> to it in my own life, and in the lives of others - partnership, romance, all the fun ones. If Arrow turned the handle on the door into this specific interest, it was Gale and Shapley that kicked it wide-open.</p>\n<p>It was especially fun to present a summary of this paper in [[stability-of-marriage#^635c68|Dr. Allison Stashko]]'s Non-Market Environments course. I was proud to cap off the end of the term talking to my fellow early-20s undergraduates about something we could all understand at the deepest of levels: Being Horny™</p>","target":[{"source":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","selector":[{"type":"TextPositionSelector","start":960,"end":1015},{"type":"TextQuoteSelector","exact":"COLLEGE  ADMISSIONS  AND  THE  STABILITY  OF  MARRIAGE ","prefix":"cal Monthly.http://www.jstor.org","suffix":"D. GALE* AND L. S. SHAPLEY, Brow"}]}],"created":"2024-03-14T22:24:15.633Z","updated":"2024-03-14T22:24:15.633Z","document":{"title":"College Admissions and the Stability of Marriage","link":[{"href":"urn:x-pdf:dd0c1fc592ad4dea981aaf84679261c3"},{"href":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf"}],"documentFingerprint":"dd0c1fc592ad4dea981aaf84679261c3"},"uri":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","id":"18iax7g01jo"},{"text":"<p>It's interesting that <a href=\"https://arc.net/l/quote/nsmrbhdi\">exploding offers</a> aren't mentioned here - reading this for the first time in 3-4 years, I thought that it was mentioned at the top.</p>\n<p>If it isn't mentioned at all in this paper, then it was without a doubt Alvin Roth's <a href=\"https://www.amazon.com/Who-Gets-What-Why-Matchmaking/dp/0544291131\">Who Gets What — And Why?</a> that introduced the concept to me.</p>","target":[{"source":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","selector":[{"type":"TextPositionSelector","start":3020,"end":3146},{"type":"TextQuoteSelector","exact":" Is it ethical to accept the first without informing the second and then withdraw his acceptance if the second later admits hi","prefix":"the second will admit him later?","suffix":"m? We contend that the difficult"}]}],"created":"2024-03-14T22:30:26.683Z","updated":"2024-03-14T22:30:26.683Z","document":{"title":"College Admissions and the Stability of Marriage","link":[{"href":"urn:x-pdf:dd0c1fc592ad4dea981aaf84679261c3"},{"href":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf"}],"documentFingerprint":"dd0c1fc592ad4dea981aaf84679261c3"},"uri":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","id":"9164n7rsi64"},{"created":"2024-03-14T22:47:20.871Z","text":"<p>In the actual presentation, it was deeply difficult to re-word this in a way that didn't sound like I was having another aneurysm. It reads <em>somewhat</em> well on paper, but sounds completely unhinged out loud.</p>","updated":"2024-03-14T22:47:20.871Z","document":{"title":"College Admissions and the Stability of Marriage","link":[{"href":"urn:x-pdf:dd0c1fc592ad4dea981aaf84679261c3"},{"href":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf"}],"documentFingerprint":"dd0c1fc592ad4dea981aaf84679261c3"},"uri":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","target":[{"source":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","selector":[{"type":"TextPositionSelector","start":5574,"end":5783},{"type":"TextQuoteSelector","exact":"DEFINITION.  An assignment of applicants to colleges will be called unstable if there are two applicants a and ,B who are assigned to colleges A and B, respectively, although ,3 prefers A to B and A prefers : ","prefix":"ng definition should not occur: ","suffix":"to a. Suppose the situation desc"}]}],"id":"nungju8fnno"},{"created":"2024-03-14T22:48:44.481Z","text":"<p>Another difficulty was trying to reframe this specific style of diagram in such a way that a room full of people who'd been staring at game theory model grids for four years didn't reflexively start eyeballing Nash equillibria</p>","updated":"2024-03-14T22:48:44.481Z","document":{"title":"College Admissions and the Stability of Marriage","link":[{"href":"urn:x-pdf:dd0c1fc592ad4dea981aaf84679261c3"},{"href":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf"}],"documentFingerprint":"dd0c1fc592ad4dea981aaf84679261c3"},"uri":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","target":[{"source":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","selector":[{"type":"TextPositionSelector","start":8594,"end":8700},{"type":"TextQuoteSelector","exact":"Example 1. The following is the \"ranking matrix\" of three men, a, ,3, and 7, and three women, A, B, and C.","prefix":"r let us look at some examples. ","suffix":" A  B  C a  1,3  2,2  3,1 p  3,1"}]}],"id":"7gx9isj070o"},{"created":"2024-03-14T22:51:55.217Z","text":"<p>The idea of match optimality was the concept that launched me out of this paper and into a rabbit hole of reading more about matchmaking algorithms, and actually modeling this in Python to toy around with the concept.</p>\n<p>If, as they assert, this will give the <em>assignees</em> their optimal outcome compared to <em>other</em> stable match configurations, that implies the existence of other stable match configurations.</p>\n<p>Take a look at the assignment grid above — it's a 2D grid representing <em>one</em> possible stable configuration. In that case, you could imagine that all possible configurations — stable or unstable — stacked on top of each other to form a 3D grid, or <em>lattice</em>, of match configurations. All of the possible 2D grids stacked like a big crystalline structure.</p>\n<p>From that lattice, you can slide out all of the unstable configurations (because, obviously, they suck and don't mean anything), leaving us with a <strong>stable match lattice</strong>.</p>\n<p>The even more interesting thing is - now that you have that stable match lattice, what <em>exactly</em> is in it? That's where this particular part gets super zesty - \"Every applicant is <strong>at least as well off [...] as he would be under any other stable assignment</strong>\"</p>\n<p>Gale-Shapley's stable match algorithm takes in two sets of people — in the case of this paper, men and women — which you can think of as the \"assigner\" and the \"assignee\", the former of which makes the proposals and the latter who accepts or declines them. Think of it as a formula:</p>\n<pre><code>matches = gale_shapley(assigners, assignees)\n</code></pre>\n<p><strong>Gale-Shapley is a noncommutative operation that optimizes the outcome for the <em>assigners</em> set</strong>.</p>\n<p>Imagine you have a set of four men and four women, and you want to measure how \"good\" a matchmaking configuration is. You could imagine that the best-case scenario is that everybody ends up with their #1 choice, and the worst-case scenario is that everybody ends up with their #4 choice. We can use that as a baseline for measuring the \"goodness\" of the matchmaking.</p>\n<p>Let's say, in some given matchmaking pair, everybody gets their first choice — the best case. If you were to add up everybody's result (1st place) and average it by the number of people (8 people) you'd get a value of <code>1</code>. On the flip side, for the worst-case, you'd get a value of <code>4</code> - ultimately being able to answer the question \"<em>On average</em>, how well were people placed?\"</p>\n<p>Ultimately, if you take an analysis of the average placement of the assigner group (in this case, men), you'll see that <strong>the assigner group's average in Gale-Shapley is the highest of all possible stable configurations</strong>.</p>\n<p>Ultimately, if you were to rank-order all possible stable matching sets on the matchmaking lattice on a spectrum of \"Benefits Group A\" to \"Benefits Group B\", the outputs of <code>gale_shapley(A, B)</code> and <code>gale_shapley(B, A)</code> calculate the ends of the lattice.</p>\n<p>This also implies a bit of a potential ethical issue. Depending on the context, there is an active decision made for \"who gets better outcomes\" by simply putting them into the algorithm first. Even within this paper, the marriage example itself generates the stable marriage output that provides men with the optimal output.</p>\n<p>Ultimately, matchmaking is still something that interests me deeply, and I'm hoping that CGC (either the consulting side or development side) puts me in a position to keep working with these very interesting, <em>very</em> cool situations.</p>","updated":"2024-03-14T22:51:55.217Z","document":{"title":"College Admissions and the Stability of Marriage","link":[{"href":"urn:x-pdf:dd0c1fc592ad4dea981aaf84679261c3"},{"href":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf"}],"documentFingerprint":"dd0c1fc592ad4dea981aaf84679261c3"},"uri":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","target":[{"source":"https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf","selector":[{"type":"TextPositionSelector","start":15201,"end":15368},{"type":"TextQuoteSelector","exact":"THEOREM  2. Every applicant is at least as well off under the assignment given by the deferred acceptance procedure as he would be under any other stable assign- ment.","prefix":"ignment of applicants. That is, ","suffix":" Proof. Let us call a college \"p"}]}],"id":"qrpzbdvom6"}]</script><div class="annotation-source-citation">Source document retrieved from <a href="https://www.math.utoronto.ca/mccann/assignments/477/GaleShapley62.pdf" target="_blank" rel="noopener noreferrer">www.math.utoronto.ca</a></div><div class="annotation-split-view"><div class="annotation-pdf-container"><div id="pdf-viewer" class="pdf-canvas-wrapper"><div class="pdf-loading">Loading PDF...</div></div></div><div class="annotation-sidebar"><div class="annotation-list"><div class="annotation-item" data-annotation-id="vmh5jlenjap" data-start="0" data-end="48"><div class="annotation-quote"><span class="annotation-prefix">th50%75%100%125%150%200%300%400%...</span><span class="annotation-highlight">College Admissions and the Stability of Marriage</span><span class="annotation-suffix">...Author(s): D. Gale and L. S. Sha</span></div><div class="annotation-comment"><div><p>This is a little test of something I'd like to do - keeping annotations of papers I've read on the CGC website, provided that they are open-access (which, unfortunately, is not always the case.)</p>
<p>This is being done with the <a href="https://github.com/elias-sundqvist/obsidian-annotator">Obsidian Annotator</a> plugin. I have <em>absolutely no idea</em> how quartz is going to handle this, so... we'll see! There's a very real chance that this is going to end up being a substantially heavier lift on the frontend and design side than my feeble backend brain can handle. So, if you're seeing this, feel free to pat me on the back for figuring it out (☞ﾟヮﾟ)☞</p></div></div><div class="annotation-meta"><time datetime="2024-03-14T22:23:53.656Z">3/14/2024</time></div></div><div class="annotation-item" data-annotation-id="18iax7g01jo" data-start="960" data-end="1015"><div class="annotation-quote"><span class="annotation-prefix">cal Monthly.http://www.jstor.org...</span><span class="annotation-highlight">COLLEGE  ADMISSIONS  AND  THE  STABILITY  OF  MARRIAGE </span><span class="annotation-suffix">...D. GALE* AND L. S. SHAPLEY, Brow</span></div><div class="annotation-comment"><div><p>Without further ado! College Admissions and the Stability of Marriage was the second paper(ish) that I read related to market design and non-market environments that got me interested in the subject. The first, Dr. Kenneth Arrow's <a href="https://cowles.yale.edu/sites/default/files/2022-09/m12-2-all.pdf">Social Choice and Individual Values</a>, was related more to voting systems - something that comes up every four years in America and then somewhat drifts into a hibernation until the next worthy national debate over the merits of first-past-the-post.</p>
<p>This one caught my attention, though, as it was the first technical analysis I'd seen of a topic that had some <em>weight</em> to it in my own life, and in the lives of others - partnership, romance, all the fun ones. If Arrow turned the handle on the door into this specific interest, it was Gale and Shapley that kicked it wide-open.</p>
<p>It was especially fun to present a summary of this paper in [[stability-of-marriage#^635c68|Dr. Allison Stashko]]'s Non-Market Environments course. I was proud to cap off the end of the term talking to my fellow early-20s undergraduates about something we could all understand at the deepest of levels: Being Horny™</p></div></div><div class="annotation-meta"><time datetime="2024-03-14T22:24:15.633Z">3/14/2024</time></div></div><div class="annotation-item" data-annotation-id="9164n7rsi64" data-start="3020" data-end="3146"><div class="annotation-quote"><span class="annotation-prefix">the second will admit him later?...</span><span class="annotation-highlight"> Is it ethical to accept the first without informing the second and then withdraw his acceptance if the second later admits hi</span><span class="annotation-suffix">...m? We contend that the difficult</span></div><div class="annotation-comment"><div><p>It's interesting that <a href="https://arc.net/l/quote/nsmrbhdi">exploding offers</a> aren't mentioned here - reading this for the first time in 3-4 years, I thought that it was mentioned at the top.</p>
<p>If it isn't mentioned at all in this paper, then it was without a doubt Alvin Roth's <a href="https://www.amazon.com/Who-Gets-What-Why-Matchmaking/dp/0544291131">Who Gets What — And Why?</a> that introduced the concept to me.</p></div></div><div class="annotation-meta"><time datetime="2024-03-14T22:30:26.683Z">3/14/2024</time></div></div><div class="annotation-item" data-annotation-id="nungju8fnno" data-start="5574" data-end="5783"><div class="annotation-quote"><span class="annotation-prefix">ng definition should not occur: ...</span><span class="annotation-highlight">DEFINITION.  An assignment of applicants to colleges will be called unstable if there are two applicants a and ,B who are assigned to colleges A and B, respectively, although ,3 prefers A to B and A prefers : </span><span class="annotation-suffix">...to a. Suppose the situation desc</span></div><div class="annotation-comment"><div><p>In the actual presentation, it was deeply difficult to re-word this in a way that didn't sound like I was having another aneurysm. It reads <em>somewhat</em> well on paper, but sounds completely unhinged out loud.</p></div></div><div class="annotation-meta"><time datetime="2024-03-14T22:47:20.871Z">3/14/2024</time></div></div><div class="annotation-item" data-annotation-id="7gx9isj070o" data-start="8594" data-end="8700"><div class="annotation-quote"><span class="annotation-prefix">r let us look at some examples. ...</span><span class="annotation-highlight">Example 1. The following is the &quot;ranking matrix&quot; of three men, a, ,3, and 7, and three women, A, B, and C.</span><span class="annotation-suffix">... A  B  C a  1,3  2,2  3,1 p  3,1</span></div><div class="annotation-comment"><div><p>Another difficulty was trying to reframe this specific style of diagram in such a way that a room full of people who'd been staring at game theory model grids for four years didn't reflexively start eyeballing Nash equillibria</p></div></div><div class="annotation-meta"><time datetime="2024-03-14T22:48:44.481Z">3/14/2024</time></div></div><div class="annotation-item" data-annotation-id="qrpzbdvom6" data-start="15201" data-end="15368"><div class="annotation-quote"><span class="annotation-prefix">ignment of applicants. That is, ...</span><span class="annotation-highlight">THEOREM  2. Every applicant is at least as well off under the assignment given by the deferred acceptance procedure as he would be under any other stable assign- ment.</span><span class="annotation-suffix">... Proof. Let us call a college &quot;p</span></div><div class="annotation-comment"><div><p>The idea of match optimality was the concept that launched me out of this paper and into a rabbit hole of reading more about matchmaking algorithms, and actually modeling this in Python to toy around with the concept.</p>
<p>If, as they assert, this will give the <em>assignees</em> their optimal outcome compared to <em>other</em> stable match configurations, that implies the existence of other stable match configurations.</p>
<p>Take a look at the assignment grid above — it's a 2D grid representing <em>one</em> possible stable configuration. In that case, you could imagine that all possible configurations — stable or unstable — stacked on top of each other to form a 3D grid, or <em>lattice</em>, of match configurations. All of the possible 2D grids stacked like a big crystalline structure.</p>
<p>From that lattice, you can slide out all of the unstable configurations (because, obviously, they suck and don't mean anything), leaving us with a <strong>stable match lattice</strong>.</p>
<p>The even more interesting thing is - now that you have that stable match lattice, what <em>exactly</em> is in it? That's where this particular part gets super zesty - "Every applicant is <strong>at least as well off [...] as he would be under any other stable assignment</strong>"</p>
<p>Gale-Shapley's stable match algorithm takes in two sets of people — in the case of this paper, men and women — which you can think of as the "assigner" and the "assignee", the former of which makes the proposals and the latter who accepts or declines them. Think of it as a formula:</p>
<pre><code>matches = gale_shapley(assigners, assignees)
</code></pre>
<p><strong>Gale-Shapley is a noncommutative operation that optimizes the outcome for the <em>assigners</em> set</strong>.</p>
<p>Imagine you have a set of four men and four women, and you want to measure how "good" a matchmaking configuration is. You could imagine that the best-case scenario is that everybody ends up with their #1 choice, and the worst-case scenario is that everybody ends up with their #4 choice. We can use that as a baseline for measuring the "goodness" of the matchmaking.</p>
<p>Let's say, in some given matchmaking pair, everybody gets their first choice — the best case. If you were to add up everybody's result (1st place) and average it by the number of people (8 people) you'd get a value of <code>1</code>. On the flip side, for the worst-case, you'd get a value of <code>4</code> - ultimately being able to answer the question "<em>On average</em>, how well were people placed?"</p>
<p>Ultimately, if you take an analysis of the average placement of the assigner group (in this case, men), you'll see that <strong>the assigner group's average in Gale-Shapley is the highest of all possible stable configurations</strong>.</p>
<p>Ultimately, if you were to rank-order all possible stable matching sets on the matchmaking lattice on a spectrum of "Benefits Group A" to "Benefits Group B", the outputs of <code>gale_shapley(A, B)</code> and <code>gale_shapley(B, A)</code> calculate the ends of the lattice.</p>
<p>This also implies a bit of a potential ethical issue. Depending on the context, there is an active decision made for "who gets better outcomes" by simply putting them into the algorithm first. Even within this paper, the marriage example itself generates the stable marriage output that provides men with the optimal output.</p>
<p>Ultimately, matchmaking is still something that interests me deeply, and I'm hoping that CGC (either the consulting side or development side) puts me in a position to keep working with these very interesting, <em>very</em> cool situations.</p></div></div><div class="annotation-meta"><time datetime="2024-03-14T22:51:55.217Z">3/14/2024</time></div></div></div></div></div></div><hr/><div class="page-footer"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:0.7,&quot;repelForce&quot;:2.5,&quot;centerForce&quot;:0.25,&quot;linkDistance&quot;:{&quot;tagTag&quot;:50,&quot;tagPost&quot;:50,&quot;postPost&quot;:50},&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false,&quot;linkStrength&quot;:{&quot;tagTag&quot;:0.5,&quot;tagPost&quot;:0.2,&quot;postPost&quot;:0.03},&quot;tagColorGradient&quot;:[&quot;#FF0000&quot;,&quot;#FF7F00&quot;,&quot;#FFFF00&quot;,&quot;#00FF00&quot;,&quot;#0000FF&quot;,&quot;#B301FF&quot;,&quot;#FF0000&quot;],&quot;edgeOpacity&quot;:{&quot;tagTag&quot;:{&quot;min&quot;:0.9,&quot;max&quot;:0.9},&quot;tagPost&quot;:{&quot;min&quot;:0.2,&quot;max&quot;:0.9},&quot;postPost&quot;:{&quot;min&quot;:0.05,&quot;max&quot;:0.9}},&quot;baseSize&quot;:{&quot;tags&quot;:10,&quot;posts&quot;:10},&quot;labelAnchor&quot;:{&quot;baseY&quot;:1.2,&quot;scaleFactor&quot;:0.05}}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.5,&quot;repelForce&quot;:2.5,&quot;centerForce&quot;:0.25,&quot;linkDistance&quot;:{&quot;tagTag&quot;:50,&quot;tagPost&quot;:75,&quot;postPost&quot;:100},&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true,&quot;linkStrength&quot;:{&quot;tagTag&quot;:0.5,&quot;tagPost&quot;:0.2,&quot;postPost&quot;:0.03},&quot;tagColorGradient&quot;:[&quot;#FF0000&quot;,&quot;#FF7F00&quot;,&quot;#FFFF00&quot;,&quot;#00FF00&quot;,&quot;#0000FF&quot;,&quot;#B301FF&quot;,&quot;#FF0000&quot;],&quot;edgeOpacity&quot;:{&quot;tagTag&quot;:{&quot;min&quot;:0.9,&quot;max&quot;:0.9},&quot;tagPost&quot;:{&quot;min&quot;:0.2,&quot;max&quot;:0.9},&quot;postPost&quot;:{&quot;min&quot;:0.05,&quot;max&quot;:0.9}},&quot;baseSize&quot;:{&quot;tags&quot;:14,&quot;posts&quot;:10},&quot;labelAnchor&quot;:{&quot;baseY&quot;:1.2,&quot;scaleFactor&quot;:0.05}}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul id="list-6" class="overflow"><li><a href="/content/notes/mdx-widgets-test" class="internal">Quartz Widgets: Graphs, Galore!</a></li><li><a href="/content/notes/stability-of-marriage" class="internal">College Admissions and the Stability of Marriage</a></li><li class="overflow-end"></li></ul></div></div></div><footer class><hr/><ul><li><a href="https://github.com/spelkington">GitHub</a></li><li><a href="https://www.linkedin.com/in/spelkington">LinkedIn</a></li><li><a href="https://chaoticgood.computer/ai-policy">AI Policy</a></li></ul><p>Copyright <a href="https://chaoticgood.computer/contact">Spencer Elkington</a> &amp; <a href="https://chaoticgood.computer">Chaotic Good Computing</a> © 2026</p><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz</a> © 2026</p></footer></div></div><script type="application/javascript">var m=Object.create;var f=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var j=(t,e,n,E)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of S(e))!b.call(t,i)&&i!==n&&f(t,i,{get:()=>e[i],enumerable:!(E=x(e,i))||E.enumerable});return t};var v=(t,e,n)=>(n=t!=null?m(y(t)):{},j(e||!t||!t.__esModule?f(n,"default",{value:t,enumerable:!0}):n,t));var p=R((M,g)=>{"use strict";g.exports=w;function B(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function w(t){if(t=t||{},t.circles)return L(t);let e=new Map;if(e.set(Date,F=>new Date(F)),e.set(Map,(F,l)=>new Map(E(Array.from(F),l))),e.set(Set,(F,l)=>new Set(E(Array.from(F),l))),t.constructorHandlers)for(let F of t.constructorHandlers)e.set(F[0],F[1]);let n=null;return t.proto?o:i;function E(F,l){let u=Object.keys(F),D=new Array(u.length);for(let s=0;s<u.length;s++){let r=u[s],A=F[r];typeof A!="object"||A===null?D[r]=A:A.constructor!==Object&&(n=e.get(A.constructor))?D[r]=n(A,l):ArrayBuffer.isView(A)?D[r]=B(A):D[r]=l(A)}return D}function i(F){if(typeof F!="object"||F===null)return F;if(Array.isArray(F))return E(F,i);if(F.constructor!==Object&&(n=e.get(F.constructor)))return n(F,i);let l={};for(let u in F){if(Object.hasOwnProperty.call(F,u)===!1)continue;let D=F[u];typeof D!="object"||D===null?l[u]=D:D.constructor!==Object&&(n=e.get(D.constructor))?l[u]=n(D,i):ArrayBuffer.isView(D)?l[u]=B(D):l[u]=i(D)}return l}function o(F){if(typeof F!="object"||F===null)return F;if(Array.isArray(F))return E(F,o);if(F.constructor!==Object&&(n=e.get(F.constructor)))return n(F,o);let l={};for(let u in F){let D=F[u];typeof D!="object"||D===null?l[u]=D:D.constructor!==Object&&(n=e.get(D.constructor))?l[u]=n(D,o):ArrayBuffer.isView(D)?l[u]=B(D):l[u]=o(D)}return l}}function L(t){let e=[],n=[],E=new Map;if(E.set(Date,u=>new Date(u)),E.set(Map,(u,D)=>new Map(o(Array.from(u),D))),E.set(Set,(u,D)=>new Set(o(Array.from(u),D))),t.constructorHandlers)for(let u of t.constructorHandlers)E.set(u[0],u[1]);let i=null;return t.proto?l:F;function o(u,D){let s=Object.keys(u),r=new Array(s.length);for(let A=0;A<s.length;A++){let c=s[A],C=u[c];if(typeof C!="object"||C===null)r[c]=C;else if(C.constructor!==Object&&(i=E.get(C.constructor)))r[c]=i(C,D);else if(ArrayBuffer.isView(C))r[c]=B(C);else{let a=e.indexOf(C);a!==-1?r[c]=n[a]:r[c]=D(C)}}return r}function F(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return o(u,F);if(u.constructor!==Object&&(i=E.get(u.constructor)))return i(u,F);let D={};e.push(u),n.push(D);for(let s in u){if(Object.hasOwnProperty.call(u,s)===!1)continue;let r=u[s];if(typeof r!="object"||r===null)D[s]=r;else if(r.constructor!==Object&&(i=E.get(r.constructor)))D[s]=i(r,F);else if(ArrayBuffer.isView(r))D[s]=B(r);else{let A=e.indexOf(r);A!==-1?D[s]=n[A]:D[s]=F(r)}}return e.pop(),n.pop(),D}function l(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return o(u,l);if(u.constructor!==Object&&(i=E.get(u.constructor)))return i(u,l);let D={};e.push(u),n.push(D);for(let s in u){let r=u[s];if(typeof r!="object"||r===null)D[s]=r;else if(r.constructor!==Object&&(i=E.get(r.constructor)))D[s]=i(r,l);else if(ArrayBuffer.isView(r))D[s]=B(r);else{let A=e.indexOf(r);A!==-1?D[s]=n[A]:D[s]=l(r)}}return e.pop(),n.pop(),D}}});var $=Object.hasOwnProperty;var h=v(p(),1),O=(0,h.default)();function d(t){return t.document.body.dataset.slug}function k(t){return`${d(window)}-checkbox-${t}`}function U(t,e){let n=t.target?.checked?"true":"false";localStorage.setItem(e,n)}function W(){document.querySelectorAll("input.checkbox-toggle").forEach((e,n)=>{let E=k(n),i=o=>U(o,E);e.addEventListener("change",i),window.addCleanup(()=>e.removeEventListener("change",i)),localStorage.getItem(E)==="true"&&(e.checked=!0)})}document.addEventListener("nav",W);
</script><script type="application/javascript">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module">function m(s,e){if(!s)return;function t(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function n(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}s?.addEventListener("click",t),window.addCleanup(()=>s?.removeEventListener("click",t)),document.addEventListener("keydown",n),window.addCleanup(()=>document.removeEventListener("keydown",n))}function p(s){for(;s.firstChild;)s.removeChild(s.firstChild)}var u=class{constructor(e,t){this.container=e;this.content=t;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),t=this.onMouseMove.bind(this),n=this.onMouseUp.bind(this),o=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this),a=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),this.container.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i),window.addEventListener("resize",a),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",t),()=>document.removeEventListener("mouseup",n),()=>this.container.removeEventListener("touchstart",o),()=>document.removeEventListener("touchmove",r),()=>document.removeEventListener("touchend",i),()=>window.removeEventListener("resize",a))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let t=this.createButton("+",()=>this.zoom(.1)),n=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(n),e.appendChild(o),e.appendChild(t),this.container.appendChild(e)}createButton(e,t){let n=document.createElement("button");return n.textContent=e,n.className="mermaid-control-button",n.addEventListener("click",t),window.addCleanup(()=>n.removeEventListener("click",t)),n}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}onTouchStart(e){if(e.touches.length!==1)return;this.isDragging=!0;let t=e.touches[0];this.startPan={x:t.clientX-this.currentPan.x,y:t.clientY-this.currentPan.y}}onTouchMove(e){if(!this.isDragging||e.touches.length!==1)return;e.preventDefault();let t=e.touches[0];this.currentPan={x:t.clientX-this.startPan.x,y:t.clientY-this.startPan.y},this.updateTransform()}onTouchEnd(){this.isDragging=!1}zoom(e){let t=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),n=this.content.getBoundingClientRect(),o=n.width/2,r=n.height/2,i=t-this.scale;this.currentPan.x-=o*i,this.currentPan.y-=r*i,this.scale=t,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){let t=this.content.querySelector("svg").getBoundingClientRect(),n=t.width/this.scale,o=t.height/this.scale;this.scale=1,this.currentPan={x:(this.container.clientWidth-n)/2,y:(this.container.clientHeight-o)/2},this.updateTransform()}},E=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"];function f(){return E.reduce((s,e)=>(s[e]=window.getComputedStyle(document.documentElement).getPropertyValue(e),s),{})}function L(s,e,t){let n=window.getComputedStyle(e),o=e.offsetWidth+parseFloat(n.marginLeft||"0")+parseFloat(n.marginRight||"0");t.style.right=`calc(${o}px + 0.3rem)`,s.prepend(t)}function y(s,e){let t=null;function n(){let r=e.querySelector("#mermaid-space"),i=e.querySelector(".mermaid-content");if(!i)return;p(i);let a=s.querySelector("svg").cloneNode(!0);i.appendChild(a),e.classList.add("active"),r.style.cursor="grab",t=new u(r,i)}function o(){e.classList.remove("active"),t?.cleanup(),t=null}return{show:n,hide:o,panZoom:t}}var v;async function M(){let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;v||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let t=v.default,n=new WeakMap;for(let r of e)n.set(r,r.innerText);async function o(){for(let a of e){a.removeAttribute("data-processed");let c=n.get(a);c&&(a.innerHTML=c)}let r=f(),i=document.documentElement.getAttribute("saved-theme")==="dark";t.initialize({startOnLoad:!1,securityLevel:"loose",theme:i?"dark":"base",themeVariables:{fontFamily:r["--codeFont"],primaryColor:r["--light"],primaryTextColor:r["--darkgray"],primaryBorderColor:r["--tertiary"],lineColor:r["--darkgray"],secondaryColor:r["--secondary"],tertiaryColor:r["--tertiary"],clusterBkg:r["--light"],edgeLabelBackground:r["--highlight"]}}),await t.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let r=0;r<e.length;r++){let i=e[r],a=i.parentElement,c=a.querySelector(".clipboard-button"),l=a.querySelector(".expand-button");L(a,c,l);let d=a.querySelector("#mermaid-container");if(!d)continue;let{show:h,hide:g}=y(i,d);l.addEventListener("click",h),m(d,g),window.addCleanup(()=>{l.removeEventListener("click",h)})}}document.addEventListener("nav",M);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="/postscript.js" type="module"></script></body></html>