(async()=>{if(document.querySelectorAll(".widget-pdf-viewer").length===0)return;if(!document.querySelector("style[data-pdf-viewer-scoped-css]"))try{let e=(await(await fetch("https://cdn.jsdelivr.net/npm/pdfjs-dist@5.4.530/web/pdf_viewer.min.css")).text()).replace(/([^\r\n,{}]+)(,(?=[^}]*{)|\s*{)/g,(u,a,r)=>a.trim().startsWith("@")||a.trim().match(/^(:root|html|body)\s*$/)?u:`.widget-pdf-viewer ${a}${r}`),n=document.createElement("style");n.setAttribute("data-pdf-viewer-scoped-css","true"),n.textContent=e,document.head.appendChild(n)}catch(e){console.error("Failed to load and scope PDF.js CSS:",e);let n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn.jsdelivr.net/npm/pdfjs-dist@5.4.530/web/pdf_viewer.min.css",document.head.appendChild(n)}let p=document.createElement("script");p.src="https://cdn.jsdelivr.net/npm/pdfjs-dist@5.4.530/build/pdf.min.mjs",p.type="module",document.head.appendChild(p),await new Promise(e=>{p.onload=e});let m=window.pdfjsLib;m.GlobalWorkerOptions.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@5.4.530/build/pdf.worker.min.mjs";async function $(e){let n=e.dataset.src,u=e.dataset.title||"PDF Document",a=e.querySelector(".pdf-viewer-canvas-container");if(a)try{let r=await m.getDocument(n).promise;a.innerHTML="";let b=e.querySelector(".pdf-viewer-info");b&&(b.innerHTML=`
          <span class="pdf-viewer-filename">${u}</span>
          <span style="color: var(--gray)">\u2022</span>
          <span>${r.numPages} page${r.numPages!==1?"s":""}</span>
        `);let E=a.clientWidth-32;for(let f=1;f<=r.numPages;f++){let s=await r.getPage(f),L=s.getViewport({scale:1}),j=E/L.width,o=s.getViewport({scale:j}),i=document.createElement("div");i.className="pdf-viewer-page-container",i.style.position="relative",i.style.width=`${o.width}px`,i.style.height=`${o.height}px`;let c=document.createElement("canvas");c.className="pdf-canvas";let S=c.getContext("2d");c.height=o.height,c.width=o.width,i.appendChild(c);let v=document.createElement("div");v.className="textLayer",i.appendChild(v),a.appendChild(i),await s.render({canvasContext:S,viewport:o}).promise;try{let d=await s.getTextContent();m.TextLayer&&await new m.TextLayer({textContentSource:d,container:v,viewport:o}).render()}catch(d){console.warn("Could not render text layer:",d)}try{let d=await s.getAnnotations();if(d.length>0){let y=document.createElement("div");y.className="annotationLayer",i.appendChild(y);for(let h of d)if(h.subtype==="Link"&&h.url){let t=document.createElement("a");t.href=h.url,t.target="_blank",t.rel="noopener noreferrer nofollow",t.className="linkAnnotation";let g=h.rect;if(g&&g.length===4){let[C,x,P,k]=g,D=P-C,F=k-x,l=o.transform,M=l[0]*C+l[2]*x+l[4],T=l[1]*C+l[3]*x+l[5],A=l[0]*D,N=l[3]*F;t.style.position="absolute",t.style.left=`${M}px`,t.style.top=`${T}px`,t.style.width=`${Math.abs(A)}px`,t.style.height=`${Math.abs(N)}px`,t.style.pointerEvents="auto"}y.appendChild(t)}}}catch(d){console.warn("Could not render annotation layer:",d)}}}catch(r){console.error("Error loading PDF:",r),a.innerHTML=`
        <div class="pdf-viewer-error">
          <div class="pdf-viewer-error-title">Failed to Load PDF</div>
          <div class="pdf-viewer-error-message">${r.message}</div>
          <a href="${n}" target="_blank" rel="noopener noreferrer">Open PDF in new tab</a>
        </div>
      `}}function w(){document.querySelectorAll(".widget-pdf-viewer").forEach(e=>{e.dataset.initialized!=="true"&&(e.dataset.initialized="true",$(e))})}document.addEventListener("DOMContentLoaded",w),document.addEventListener("nav",w),(document.readyState==="complete"||document.readyState==="interactive")&&w()})();
